<ng-container class="load-block"
              *ngIf="!contragents">
  <span class="spinner spinner-md"></span>
</ng-container>

<div class="search" *ngIf="showAll">
  <input #contragentSearchInput
         type="text"
         placeholder="Контрагент"
         autocomplete="off"
         [value]="contragentSearchValue"
         (input)="onCustomerSearchInputChange($event.target.value)" />
</div>


<div class="customers-list">
  <ng-container *ngFor="let customer of getCustomers() | contragentSearchFilter: getCustomerSearchInputValue();">
    <clr-checkbox-wrapper>
      <input type="checkbox"
             clrCheckbox
             [checked]="checkIfCustomerIsChecked(customer.id)"
             (input)="onCustomerSelected($event.target.value)"
             value="{{ customer.id }}" />
      <label>{{ customer.shortName }}</label>
    </clr-checkbox-wrapper>
  </ng-container>
</div>

<ng-container *ngIf="
    contragents &&
    limit > 0 &&
    limit < contragents.length && !showAll ||
    (showAll && limit < ( getCustomers() | contragentSearchFilter: getCustomerSearchInputValue() ).length)">

  <div class="show-all" (click)="showAll = !showAll">
    <a>{{ showAll ? 'Свернуть' : 'Показать всех' }}</a>
  </div>

</ng-container>