<ng-container *ngIf="(status$ | async) !== 'fetching'; else placeholder">
  <div class="app-row">
    <div class="app-col app-table app-no-border tab-row">
      <uxg-tabs>
        <uxg-tab-title #sentToReviewTab
                       [active]="true"
                       (onToggle)="onToggle($event, technicalProposalsStatus.SENT_TO_REVIEW)"
                       [disabled]="(proposalsSentToReview$ | async).length === 0">
          <ng-container *ngIf="(proposalsSentToReview$ | async) as proposals">
            Необходимо рассмотреть <span class="counter">({{ proposals?.length }})</span>
          </ng-container>
        </uxg-tab-title>

        <uxg-tab-title #sentToEditTab
                       (onToggle)="onToggle($event, technicalProposalsStatus.SENT_TO_EDIT)"
                       [disabled]="(proposalsSentToEdit$ | async).length === 0">
          <ng-container *ngIf="(proposalsSentToEdit$ | async) as proposals">
            На доработке <span class="counter">({{ proposals?.length }})</span>
          </ng-container>
        </uxg-tab-title>

        <uxg-tab-title #reviewedTab
                       (onToggle)="onToggle($event, technicalProposalsStatus.ACCEPTED)"
                       [disabled]="(proposalsReviewed$ | async).length === 0">
          <ng-container *ngIf="(proposalsReviewed$ | async) as proposals">
            Рассмотренные <span class="counter">({{ proposals?.length }})</span>
          </ng-container>
        </uxg-tab-title>
      </uxg-tabs>
    </div>
  </div>

  <div class="app-row">
    <div class="app-col">
      <ng-container *ngIf="(activeList$ | async) as technicalProposals">
        <ng-container *ngIf="technicalProposals.length !== 0; else emptyList">
          <app-request-customer-technical-proposal
            *ngFor="let technicalProposal of technicalProposals; let i = index"
            [request]="(request$ | async)"
            [technicalProposal]="technicalProposal"
            [technicalProposalIndex]="i"
            [currentList]="activeTab"
          ></app-request-customer-technical-proposal>
        </ng-container>

        <ng-template #emptyList>
          <div class="ghost-color empty-list">Список технических предложений пуст</div>
        </ng-template>
      </ng-container>
    </div>

    <div class="app-col-aside">
      <ng-container *ngIf="(technicalProposals$ | async) as technicalProposals">
        <app-request-technical-proposal-filter
          [technicalProposals]="technicalProposals"
          [technicalProposalsAvailableStatuses]="technicalProposalAvailableStatuses$ | async"
          (filters)="filter($event)">
        </app-request-technical-proposal-filter>
      </ng-container>
    </div>
  </div>
</ng-container>

<ng-template #placeholder>
  <div class="app-row">
    <div class="app-col">
      <div class="app-row">
        <div class="app-col app-row">
          <div class="placeholder-row" *ngFor="let i of [].constructor(2)" [style.height.px]="40" [style.width.px]="200"></div>
        </div>
      </div>

      <div class="placeholder" *ngFor="let i of [].constructor(10)" [style.height.px]="160"></div>
    </div>
    <div class="app-col-aside detachable"></div>
  </div>
</ng-template>

<ng-template #loading>
  <div class="text-center">
    <span class="spinner spinner-md"></span>
  </div>
</ng-template>
