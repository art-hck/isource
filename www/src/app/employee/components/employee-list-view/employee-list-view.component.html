<div class="app-row">
  <div class="app-col action">
    <uxg-tabs>
      <uxg-tab-title #backofficeTab (click)="employeeActiveTabType = 'BACKOFFICE_BUYER'" [active]="true">
        Закупщики
        <ng-container *ngIf="backoffice">
          <span class="app-ghost-color">({{ backoffice.length }})</span>
        </ng-container>
      </uxg-tab-title>
      <uxg-tab-title #employeesTab (click)="employeeActiveTabType = 'SENIOR_BACKOFFICE'">
        Менеджеры
          <ng-container *ngIf="seniorBackoffice">
            <span class="app-ghost-color">({{ seniorBackoffice.length }})</span>
          </ng-container>
      </uxg-tab-title>
    </uxg-tabs>
  </div>

  <div class="app-col action app-grow-0">
    <button uxgButton secondary iconText
            *ngIf="userInfoService.isSeniorBackoffice()"
            (click)="editedEmployee = null; createEmployeeModal.open()">
      <clr-icon size="16" shape="app-plus"></clr-icon>
      <span>Новый сотрудник</span>
    </button>
  </div>
</div>

<app-employee-list *ngIf="backofficeTab.active"
                   [employees]="backoffice"
                   (edit)="editedEmployee = $event; createEmployeeModal.open()"></app-employee-list>

<app-employee-list *ngIf="employeesTab.active"
                   [employees]="seniorBackoffice"
                   (edit)="editedEmployee = $event; createEmployeeModal.open()"></app-employee-list>



<clr-modal #createEmployeeModal [clrModalSize]="'lg'">
  <h2 class="modal-title" *ngIf="!editedEmployee; else editEmployee">Добавить нового сотрудника</h2>

  <ng-template #editEmployee>
    <h2 class="modal-title">Редактировать сотрудника</h2>
  </ng-template>

  <div class="modal-body">
    <app-employee-form
      *ngIf="createEmployeeModal._open"
      (cancel)="editedEmployee = null; createEmployeeModal.close()"
      (addEmployee)="addEmployee($event); createEmployeeModal.close()"
      (editEmployee)="updateEmployeeListItem($event); createEmployeeModal.close()"
      [roleSelectorDisabled]="false"
      [employee]="editedEmployee"
      [employeeActiveTabType]="employeeActiveTabType">
    </app-employee-form>
  </div>
</clr-modal>
