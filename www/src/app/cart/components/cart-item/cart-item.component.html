<div class="card">
  <div class="clr-row position-list">
    <div class="clr-col-2 image">
      <img *ngIf="item.catalogPosition.image; else noImage" src="{{ item.catalogPosition.image }}" />
      <ng-template #noImage>
        <p>Изображение отсутствует</p>
      </ng-template>
    </div>
    <div class="clr-col-7">
      <p class="position-name">{{ item.catalogPosition.name }}</p>
      <p class="description">{{ item.catalogPosition.description }}</p>
      <p>Срок поставки: {{ item.catalogPosition.productionTime }} дней</p>
    </div>
    <div class="clr-col-3 right-align">
      <button class="btn btn-link btn-icon cart-delete-button" (click)="onDeleteItem(item)">
        <clr-icon shape="times"></clr-icon>
      </button>

      <p class="supplier-name">
        <a (click)="showContragentInfo(item.catalogPosition.supplierContragent.id)">
          {{ item.catalogPosition.supplierContragent.shortName }}
        </a>
      </p>

      <p class="price">{{ item.catalogPosition.price | currency : item.catalogPosition.currency }} / {{ item.catalogPosition.measureUnit }}</p>

      <div class="cart-quantity-block">
        <div class="cart-quantity-block-field">
          <input type="number"
                 name="quantity"
                 step="1"
                 min="0"
                 [value]="item.quantity"
                 (change)="updateItemQuantity(item, $event.target.value)"
                 [class.invalid]="item.quantity <= 0"
                 (keypress)="filterEnteredText($event)"
                 class="hidden-arrows text-right price cart-quantity-field"/>
        </div>
        <div class="cart-quantity-block-sum">
          <span class="cart-value">{{ item.getSum() | currency : item.catalogPosition.currency }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<clr-modal [clrModalSize]="'lg'" [(clrModalOpen)]="contragentInfoModalOpened">
  <h3 class="modal-title">{{ contragent?.shortName }}</h3>

  <div class="modal-body">
    <app-contragent-info
            [contragent]="contragent">
    </app-contragent-info>
  </div>
</clr-modal>

