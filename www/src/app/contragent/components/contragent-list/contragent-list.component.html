<ng-template #loading class="load-block">
  <span class="spinner spinner-md"></span>
</ng-template>

<ng-container *ngIf="contragents; else loading">

  <clr-datagrid class="employee-list-datagrid">

    <clr-dg-column class="request-number clr-col">
      Наименование контрагента
    </clr-dg-column>

    <clr-dg-column class="request-published clr-col-2">
      ИНН
    </clr-dg-column>

    <clr-dg-column class="phone clr-col-2">
      КПП
    </clr-dg-column>

    <clr-dg-column class="requests-positions-count clr-col-2">
      e-mail
    </clr-dg-column>

    <clr-dg-column class="requests-positions-count clr-col-1">
      Ответственный менеджер БО
    </clr-dg-column>
    <clr-dg-column class="clr-col-1">
    </clr-dg-column>


    <clr-dg-row *ngFor="let contragent of contragents | contragentSearchFilter: searchValue" (click)="onRowClick(contragent.id)">

      <clr-dg-cell class="employee-full-name clr-col">
        <b>{{ contragent.shortName}}</b>
      </clr-dg-cell>

      <clr-dg-cell class="phone clr-col-2">
        {{ contragent.inn }}
      </clr-dg-cell>

      <clr-dg-cell class="requests-positions-count clr-col-2">
        {{ contragent.kpp }}
      </clr-dg-cell>

      <clr-dg-cell class="employee-email clr-col-2">
        <a (click)="mailto($event, contragent.email)" href="mailto:{{ contragent.email }}">{{ contragent.email }}</a>
      </clr-dg-cell>

      <clr-dg-cell class="requests-positions-count clr-col-1">
        {{ contragent.responsible?.shortName }}
      </clr-dg-cell>
      <clr-dg-cell class="edit clr-col-1">
        <button uxgButton secondary icon *ngIf="user.isSeniorBackoffice()" (click)="onEditClick(contragent.id)">
          <clr-icon shape="app-pen"></clr-icon>
        </button>
      </clr-dg-cell>

    </clr-dg-row>

  </clr-datagrid>

</ng-container>
