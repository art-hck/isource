<app-catalog-categories *ngIf="categoriesOpened" [(opened)]="categoriesOpened"></app-catalog-categories>

<div #searchPanel class="search-bar">
  <div class="app-row app-layout app-align-items-center">
    <div class="clr-col-2">
      <button class="btn btn-categories btn-primary-small" aria-label="Каталог" title="Каталог"
              (click)="onToggleCategories()">
        <clr-icon shape="app-hamburger"></clr-icon>
        Каталог
      </button>
    </div>

    <div class="clr-col-7 search">
      <input placeholder="Введите наименование позиции для поиска"
             type="text"
             name="searchName"
             class="input-search"
             [(ngModel)]="searchText"
             (input)="onShowSearchSuggestions()"/>
      <button class="btn btn-link btn-reset" (click)="onResetClick()" *ngIf="searchText">
        <img src="../../../../assets/images/delete.svg">
      </button>
      <button class="btn btn-primary btn-search" aria-label="Поиск" title="Поиск" (click)="onSearch()"
              [disabled]="!searchText">
        <clr-icon shape="app-search"></clr-icon>
      </button>
      <div class="search-dropdown" *ngIf="showSearchResults">
        <ng-container *ngIf="(searchResults$ | async) as searchResults">
          <div class="search-item category"
            *ngFor="let category of searchResults.categories"
            (click)="onCategoryClick(category)">{{ category.name }}</div>
          <div class="search-item position"
            *ngFor="let position of searchResults.positions"
               (click)="onPositionClick(position)">{{ position.name }}</div>
        </ng-container>
      </div>
    </div>
    <a class="new-request" [routerLink]="'/requests/create'">Не нашли, что искали?</a>
  </div>
</div>

